# AI 배달 도우미 프로토타입

전화를 통한 AI 기반 음식 배달 주문 시스템입니다. 디지털 소외계층(중장년층, 노년층)을 위한 친근한 음성 주문 서비스를 제공합니다.

## 🎯 프로젝트 목표

- **디지털 격차 해소**: 앱 사용이 어려운 분들도 전화로 쉽게 배달 주문
- **자연스러운 대화**: GPT-4 기반의 친근하고 이해하기 쉬운 AI 응답
- **실시간 음성 처리**: STT/TTS 기술을 활용한 즉시 응답
- **개인화 서비스**: 고객 선호도 학습 및 재주문 편의 기능

## 🛠️ 기술 스택

### 백엔드
- **Python 3.8+**
- **FastAPI**: 웹 서버 프레임워크
- **SQLite**: 로컬 데이터베이스
- **SQLAlchemy**: ORM

### AI & 음성 처리
- **OpenAI GPT-4**: 자연어 대화 처리
- **OpenAI Whisper**: 음성 인식 (STT)
- **Google Text-to-Speech**: 음성 합성 (TTS)

### 통신
- **Twilio**: 전화 수신/발신 서비스
- **HTTP/REST API**: 시스템 간 통신

## 📁 프로젝트 구조

```
NewProject/
├── main.py                 # 메인 FastAPI 애플리케이션
├── ai_conversation.py      # AI 대화 처리 모듈
├── speech_processor.py     # 음성 인식/합성 모듈
├── database.py            # 데이터베이스 관리 모듈
├── test_system.py         # 시스템 테스트 스크립트
├── requirements.txt       # Python 패키지 의존성
├── .env.example          # 환경 변수 설정 예시
└── README.md             # 프로젝트 문서
```

## 🚀 설치 및 실행

### 1. 환경 설정

```bash
# 가상환경 생성 (권장)
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# 패키지 설치
pip install -r requirements.txt
```

### 2. 환경 변수 설정

`.env.example`을 `.env`로 복사하고 실제 API 키를 입력하세요:

```bash
cp .env.example .env
```

필요한 API 키:
- **Twilio**: 전화 수신 서비스 (무료 계정 가능)
- **OpenAI**: GPT-4 API (유료)
- **Google Cloud**: STT/TTS API (일정량 무료)

### 3. 시스템 테스트

```bash
python test_system.py
```

### 4. 서버 실행

```bash
python main.py
```

서버가 `http://localhost:8000`에서 실행됩니다.

## 📞 사용 방법

### 1. 전화 수신 설정

Twilio 콘솔에서 웹훅 URL을 설정:
- Voice URL: `https://your-domain.com/voice`
- 실제 도메인으로 변경 필요 (ngrok 등 사용 가능)

### 2. 대화 흐름

```
고객: "안녕하세요, 치킨 주문하고 싶어요"
AI: "안녕하세요! 어떤 치킨을 원하세요? 후라이드, 양념, 간장 중에서 선택해주세요"
고객: "양념치킨 하나요"
AI: "양념치킨 한 마리 맞죠? 어디로 배달해드릴까요?"
고객: "서울시 강남구 역삼동 123번지"
AI: "주문 완료! 30분 내 배달 예정입니다"
```

## 🧪 테스트

시스템 테스트 실행:

```bash
python test_system.py
```

테스트 항목:
- ✅ 데이터베이스 연결 및 CRUD
- ✅ AI 대화 처리
- ✅ 음성 처리 모듈
- ✅ 전체 주문 시나리오

## 📊 API 엔드포인트

### 메인 엔드포인트
- `GET /`: 시스템 상태 확인
- `POST /voice`: Twilio 음성 웹훅
- `POST /process_speech`: 음성 처리
- `GET /call_status/{call_sid}`: 통화 상태 조회

### 테스트 엔드포인트
- `POST /make_test_call`: 테스트 전화 발신

## 💾 데이터베이스 스키마

### 주요 테이블
- **customers**: 고객 정보
- **orders**: 주문 정보
- **conversations**: 대화 기록
- **menu_items**: 메뉴 아이템
- **system_logs**: 시스템 로그

## 🔧 주요 기능

### 1. 친근한 AI 대화
- 중장년층 친화적 말투
- 천천히, 명확한 설명
- 반복 설명 제공

### 2. 스마트 음성 처리
- 실시간 음성 인식
- 오타/발음 자동 교정
- 자연스러운 음성 합성

### 3. 개인화 서비스
- 고객 주문 이력 저장
- 선호 메뉴 기억
- 간편 재주문

### 4. 강력한 주문 관리
- 실시간 주문 처리
- 배달 상태 추적
- 고객 대화 기록

## 🚧 현재 제한사항

1. **배달업체 연동**: 현재는 자체 시스템만 지원
2. **결제 시스템**: 현금 결제만 지원 (카드 결제 미구현)
3. **다중 통화**: 동시 통화 처리 최적화 필요
4. **음성 품질**: 노이즈 환경에서 인식률 개선 필요

## 🔮 향후 계획

### 단기 목표 (1-2개월)
- [ ] 실제 전화 테스트 및 최적화
- [ ] 음성 인식 정확도 개선
- [ ] 사용자 피드백 수집 및 반영

### 중기 목표 (3-6개월)
- [ ] 지역 음식점 파트너십 구축
- [ ] 카드 결제 시스템 연동
- [ ] 모바일 관리자 앱 개발

### 장기 목표 (6-12개월)
- [ ] 대형 배달업체 API 연동
- [ ] 다지역 서비스 확장
- [ ] 말동무 기능 고도화

## 📈 성공 지표

- **기술적 지표**
  - 음성 인식 정확도: 95% 이상
  - 응답 시간: 3초 이내
  - 주문 완료율: 85% 이상

- **사업적 지표**
  - 월 활성 사용자: 100명 이상
  - 고객 만족도: 4.5점 이상 (5점 만점)
  - 재주문율: 60% 이상

## 🤝 기여 방법

1. Fork 후 브랜치 생성
2. 기능 개발 및 테스트
3. Pull Request 제출

## 📄 라이센스

MIT License

## 📞 문의

프로젝트 관련 문의사항이 있으시면 이슈를 등록해 주세요.

---

**"디지털 격차를 줄이고, 모든 세대가 편리한 배달 서비스를 이용할 수 있도록"**